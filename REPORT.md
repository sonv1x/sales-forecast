# ЗВІТ з практичного заняття №13
**Тема:** Бізнес-застосування. 
**Студентка:** Зоріна Софія

## 1. Бізнес-контекст і мета
* **Задача:** Роздрібна крамниця стикається з проблемою балансування запасів. Надлишок товару призводить до заморожування коштів, а нестача — до втрати прибутку.
* **Мета:** Розробити модель прогнозування щоденних продажів, яка буде точнішою за прості евристичні методи (наприклад, "продамо стільки ж, скільки минулого тижня").
* **Критерій успіху:** Зниження метрики MAPE (середня абсолютна похибка у відсотках) нижче рівня базової лінії (Seasonal Naive).

## 2. Дані
Використано синтетичний датасет, що імітує річну історію продажів (365 днів):
* **Структура:** Дата, обсяг продажів, наявність промо-акцій.
* **Властивості:** Присутній висхідний тренд, виражена тижнева сезонність та випадкові сплески від промо-акцій.
* **Підготовка:** Дані агреговані поденно. Згенеровано ознаки:
    * Лаги (Lag features): продажі 1, 7, 14 днів тому.
    * Ковзні вікна (Rolling mean/std): середнє за тиждень.
    * Календарні ознаки: день тижня, вихідний, місяць.

## 3. Методологія
Було порівняно два підходи до моделювання:
1.  **Підхід A (Machine Learning): XGBoost.** Алгоритм градієнтного бустингу на деревах рішень. Відомий своєю високою точністю на табличних даних та здатністю враховувати нелінійні залежності.
2.  **Підхід B (Genetic Programming): Symbolic Regression (gplearn).** Еволюційний метод, який шукає математичну формулу залежності Y = f(X). Популяція формул еволюціонувала протягом 20 поколінь. Використано операції додавання, віднімання, множення, ділення, логарифму тощо.

## 4. Результати
**Порівняльна таблиця метрик (на тестовій вибірці):**

| Модель | MAE | RMSE | MAPE (%) |
| :--- | :--- | :--- | :--- |
| Naive (Last Value) | 20.54 | 28.79 | 13.04% |
| **Seasonal Naive (Baseline)** | 15.26 | 21.80 | 9.69% |
| **Genetic Programming** | 9.44 | 12.42 | 6.29% |
| **XGBoost (Best)** | **8.54** | **10.79** | **5.73%** |

**Графічний аналіз:**
На графіку нижче видно, що і XGBoost (синя лінія), і Генетичне програмування (зелена лінія) значно краще відтворюють піки продажів порівняно з пунктирною лінією сезонного прогнозу.

![Графік прогнозу](forecast_graph.png)

**Знайдена формула (Генетичне програмування):**
Алгоритм знайшов наступну залежність:
`add(div(abs(X0), add(inv(X8), inv(X8))), add(div(abs(X0), inv(X8)), abs(sqrt(sub(add(X0, add(log(X6), mul(X6, X5))), log(add(inv(X8), mul(X6, X7))))))))`
*(де X0, X8... - це вхідні ознаки: лаги та ковзні середні).*

## 5. Висновки та бізнес-рекомендації
1.  **Ефективність:** Впровадження ML-моделі (XGBoost) дозволяє знизити помилку прогнозування з **9.69%** до **5.73%**. Це означає покращення точності планування на **~40%** відносно базового підходу.
2.  **Генетичне програмування:** Метод показав результат, дуже близький до лідера (MAPE 6.29%). Це підтверджує, що еволюційні методи можуть бути серйозною альтернативою класичному ML, особливо коли потрібна інтерпретована формула, а не "чорна скринька".
3.  **Вплив на бізнес:** Підвищення точності дозволить:
    * Зменшити страхові запаси на складі.
    * Точніше планувати вихід персоналу в дні пікових навантажень (промо).
4.  **Рекомендація:** Для продакшн-системи рекомендується використовувати модель XGBoost через найвищу точність та стабільність.
